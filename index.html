<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gallery Row Push</title>
<style>
html { scroll-behavior: smooth; }
body {
  margin: 0;
  font-family: "Poppins", Arial, sans-serif;
  background-color: #fff;
}

/* Header */
header {
  position: sticky;
  top: 0;
  background: linear-gradient(-45deg, #14bbce6c, #073748, hsl(213, 66%, 15%), hsl(60, 2%, 23%));
  background-size: 400% 400%;
  animation: gradientMove 15s ease infinite;
  padding: 14px 18px;
  color: rgba(255, 255, 255, 0.237);
  z-index: 1000;
  display: flex;
  align-items: center;
  gap: 12px;
}
header img { height: 38px; }

@keyframes gradientMove {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* Gallery grid */
.gallery {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  grid-auto-rows: 500px;
  gap: 25px;
  padding: 26px;
  max-width: 86%;
  margin: 0 auto;
}

/* Cards */
.card {
  position: relative;
  overflow: hidden;
  border-radius: 18px;
  cursor: pointer;
  transition: transform 0.35s ease, box-shadow 0.35s ease;
  z-index: 1;
}

.card img,
.card video {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.card video {
  opacity: 0;
  transition: opacity 0.35s ease;
}

.card:hover video {
  opacity: 1;
}

/* Pop up */
.card.hovered {
  transform: scale(1.12);
  box-shadow: 0 25px 50px rgba(0,0,0,.25);
  z-index: 10;
}
</style>
</head>
<body>

<header>
  <img src="MÃ©thos_Logo.png" alt="Logo">
</header>

<div class="gallery">
  <div class="card portrait"><img src="Im_0001.jpg"><video src="Vid_0001.mp4" muted loop></video></div>
  <div class="card portrait"><img src="Im_0002.jpg"><video src="Vid_0002.mp4" muted loop></video></div>
  <div class="card portrait"><img src="Im_0003.jpg"><video src="Vid_0003.mp4" muted loop></video></div>
  <div class="card portrait"><img src="Im_0004.jpg"><video src="Vid_0004.mp4" muted loop></video></div>
  <div class="card portrait"><img src="Im_0005.jpg"><video src="Vid_0005.mp4" muted loop></video></div>
  <div class="card portrait"><img src="Im_0006.jpg"><video src="Vid_0006.mp4" muted loop></video></div>
  <div class="card portrait"><img src="Im_0007.jpg"><video src="Vid_0007.mp4" muted loop></video></div>
  <div class="card portrait"><img src="Im_0008.jpg"><video src="Vid_0008.mp4" muted loop></video></div>
  <div class="card portrait"><img src="Im_0009.jpg"><video src="Vid_0009.mp4" muted loop></video></div>
</div>

<script>
const cards = document.querySelectorAll('.card');
const gallery = document.querySelector('.gallery');
const rowGap = 18;

// Detect if it's a touch device
const isMobile = 'ontouchstart' in window || navigator.maxTouchPoints > 0;

cards.forEach(card => {
  const video = card.querySelector('video');

  if (!isMobile) {
    // Desktop: hover behavior
    card.addEventListener('mouseenter', () => {
      card.classList.add('hovered');
      video.currentTime = 0;
      video.play();

      const cardRect = card.getBoundingClientRect();
      cards.forEach(other => {
        if (other === card) return;
        const otherRect = other.getBoundingClientRect();

        if (otherRect.bottom <= cardRect.top) {
          other.style.transform = `translateY(-${rowGap}px)`;
        } else if (otherRect.top >= cardRect.bottom) {
          other.style.transform = `translateY(${rowGap}px)`;
        }
      });
    });

    card.addEventListener('mouseleave', () => {
      card.classList.remove('hovered');
      video.pause();
      cards.forEach(other => other.style.transform = 'none');
    });
  } else {
    // Mobile: autoplay when in viewport
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          video.play().catch(() => {}); // autoplay may fail without muted
        } else {
          video.pause();
        }
      });
    }, { threshold: 0.5 }); // play when 50% visible

    observer.observe(card);
  }
});

</script>

</body>
</html>
